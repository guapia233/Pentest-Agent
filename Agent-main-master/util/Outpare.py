import json

class CustomJSONAgentOutputParser:
    @staticmethod
    def parse(output):
        try:
            parsed_output = json.loads(output)
            task_name = parsed_output.get("task_name")
            command = parsed_output.get("command", {})
            command_name = command.get("name")
            command_args = command.get("args", {})
            return task_name, command_name, command_args
        except json.JSONDecodeError:
            raise ValueError("Failed to decode JSON output")

# 使用示例
output = '{"task_name": "搜索2023年12月电影上映", "command": {"name": "search", "args": {"query": "2023年12月电影上映"}}}'
parser = CustomJSONAgentOutputParser()
try:
    task_name, command_name, command_args = parser.parse(output)
    print(f"Task Name: {task_name}")
    print(f"Command Name: {command_name}")
    print(f"Command Args: {command_args}")
except ValueError as e:
    print(f"An error occurred during parsing: {e}")